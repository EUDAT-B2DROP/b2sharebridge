/*! For license information please see b2sharebridge-node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-DzkaNZKO_mjs.js.LICENSE.txt */
"use strict";(self.webpackChunkb2sharebridge=self.webpackChunkb2sharebridge||[]).push([["node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-DzkaNZKO_mjs"],{4209:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=a(70992))&&r.__esModule?r:{default:r};function n(e,t,a){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=class{constructor(e){n(this,"appId",void 0),n(this,"persisted",!1),n(this,"clearedOnLogout",!1),this.appId=e}persist(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.persisted=e,this}clearOnLogout(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clearedOnLogout=e,this}build(){return new i.default(this.appId,this.persisted?window.localStorage:window.sessionStorage,!this.clearedOnLogout)}}},58793:(e,t,a)=>{t.c0=function(e){return new r.default(e)};var r=n(a(4209)),i=n(a(70992));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){Object.keys(e).filter(e=>!t||t(e)).map(e.removeItem.bind(e))}},68059:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var r=a(20641),i=a(50953),n=a(90033),o=a(17203),l=a(58793),u=a(94434),s=a(11008),c=a(79455),d=a(30109),m=a(35810),p=a(50240);function v(e){if(""===e.trim())return(0,d.t)("Names must not be empty.");if(e.startsWith("."))return(0,d.t)("Names must not start with a dot.");if(e.length>64)return(0,d.t)("Names may be at most 64 characters long.");try{return(0,m.KT)(e),""}catch(e){if(!(e instanceof m.di))throw e;switch(e.reason){case m.nF.Character:return(0,d.t)('"{char}" is not allowed inside a name.',{char:e.segment});case m.nF.ReservedName:return(0,d.t)('"{segment}" is a reserved name and not allowed.',{segment:e.segment});case m.nF.Extension:return e.segment.match(/\.[a-z]/i)?(0,d.t)('"{extension}" is not an allowed name.',{extension:e.segment}):(0,d.t)('Names must not end with "{extension}".',{extension:e.segment});default:return(0,d.t)("Invalid name.")}}}const f={key:0,class:"public-auth-prompt__text"},h=(0,r.pM)({__name:"PublicAuthPrompt",props:{nickname:{default:""},title:{default:(0,d.t)("Guest identification")},text:{default:""},notice:{default:""},submitLabel:{default:(0,d.t)("Submit name")},cancellable:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const a=e,m=t,p=(0,r.rk)("input"),h=(0,l.c0)("public").build(),b=(0,i.KR)(a.nickname);(0,r.wB)(()=>a.nickname,()=>{b.value=a.nickname}),(0,r.wB)(b,e=>{const t=v(e);if(!t)return p.value.setCustomValidity(t),p.value.reportValidity(),void p.value.focus()});const y=(0,r.EW)(()=>{const e={label:(0,d.t)("Cancel"),variant:"tertiary",callback:()=>m("close")},t={label:a.submitLabel,type:"submit",variant:"primary"};return a.cancellable?[e,t]:[t]}),_=(0,r.EW)(()=>a.notice?a.notice:b.value?(0,d.t)("You are currently identified as {nickname}.",{nickname:b.value}):(0,d.t)("You are currently not identified."));function g(){const e=b.value.trim(),t=v(e);if(t)return p.value.setCustomValidity(t),p.value.reportValidity(),void p.value.focus();if(""===e)return p.value.setCustomValidity((0,d.t)("You cannot leave the name empty.")),p.value.reportValidity(),void p.value.focus();if(e.length<2)return p.value.setCustomValidity((0,d.t)("Please enter a name with at least 2 characters.")),p.value.reportValidity(),void p.value.focus();try{(0,o.L$)(e)}catch(e){return d.l.error("Failed to set nickname",{error:e}),(0,d.s)((0,d.t)("Failed to set nickname.")),void p.value.focus()}h.setItem("public-auth-prompt-shown","true"),m("close",b.value)}return(t,a)=>((0,r.uX)(),(0,r.Wv)((0,i.R1)(u.A),{buttons:y.value,class:"public-auth-prompt","data-cy-public-auth-prompt-dialog":"","is-form":"","no-close":"",name:e.title,onSubmit:g},{default:(0,r.k6)(()=>[e.text?((0,r.uX)(),(0,r.CE)("p",f,(0,n.v_)(e.text),1)):(0,r.Q3)("",!0),(0,r.bF)((0,i.R1)(s.A),{class:"public-auth-prompt__header",text:_.value,type:"info"},null,8,["text"]),(0,r.bF)((0,i.R1)(c.A),{ref:"input",modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),class:"public-auth-prompt__input","data-cy-public-auth-prompt-dialog-name":"",label:(0,i.R1)(d.t)("Name"),placeholder:(0,i.R1)(d.t)("Enter your name"),required:!e.cancellable,minlength:"2",maxlength:"64",name:"name"},null,8,["modelValue","label","placeholder","required"])]),_:1},8,["buttons","name"]))}}),b=(0,p._)(h,[["__scopeId","data-v-b33d88e5"]])},70992:(e,t)=>{function a(e,t,a){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class r{constructor(e,t,i){a(this,"scope",void 0),a(this,"wrapped",void 0),this.scope="".concat(i?r.GLOBAL_SCOPE_PERSISTENT:r.GLOBAL_SCOPE_VOLATILE,"_").concat(btoa(e),"_"),this.wrapped=t}scopeKey(e){return"".concat(this.scope).concat(e)}setItem(e,t){this.wrapped.setItem(this.scopeKey(e),t)}getItem(e){return this.wrapped.getItem(this.scopeKey(e))}removeItem(e){this.wrapped.removeItem(this.scopeKey(e))}clear(){Object.keys(this.wrapped).filter(e=>e.startsWith(this.scope)).map(this.wrapped.removeItem.bind(this.wrapped))}}t.default=r,a(r,"GLOBAL_SCOPE_VOLATILE","nextcloud_vol"),a(r,"GLOBAL_SCOPE_PERSISTENT","nextcloud_per")},79455:(e,t,a)=>{a.d(t,{A:()=>r._});var r=a(92248)}}]);
//# sourceMappingURL=b2sharebridge-node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-DzkaNZKO_mjs.js.map?v=3ece683731ed25675402