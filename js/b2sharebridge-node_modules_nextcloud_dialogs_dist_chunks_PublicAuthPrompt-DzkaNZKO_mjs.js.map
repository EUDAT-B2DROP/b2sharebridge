{"version":3,"file":"b2sharebridge-node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-DzkaNZKO_mjs.js?v=3ece683731ed25675402","mappings":"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","sources":["webpack:///b2sharebridge/node_modules/@nextcloud/dialogs/node_modules/@nextcloud/browser-storage/dist/storagebuilder.js","webpack:///b2sharebridge/node_modules/@nextcloud/dialogs/node_modules/@nextcloud/browser-storage/dist/index.js","webpack:///b2sharebridge/node_modules/@nextcloud/dialogs/dist/chunks/PublicAuthPrompt-DzkaNZKO.mjs","webpack:///b2sharebridge/node_modules/@nextcloud/dialogs/node_modules/@nextcloud/browser-storage/dist/scopedstorage.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _scopedstorage = _interopRequireDefault(require(\"./scopedstorage\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nclass StorageBuilder {\n  constructor(appId) {\n    _defineProperty(this, \"appId\", void 0);\n    _defineProperty(this, \"persisted\", false);\n    _defineProperty(this, \"clearedOnLogout\", false);\n    this.appId = appId;\n  }\n  persist() {\n    let persist = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.persisted = persist;\n    return this;\n  }\n  clearOnLogout() {\n    let clear = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.clearedOnLogout = clear;\n    return this;\n  }\n  build() {\n    return new _scopedstorage.default(this.appId, this.persisted ? window.localStorage : window.sessionStorage, !this.clearedOnLogout);\n  }\n}\nexports.default = StorageBuilder;\n//# sourceMappingURL=storagebuilder.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clearAll = clearAll;\nexports.clearNonPersistent = clearNonPersistent;\nexports.getBuilder = getBuilder;\nvar _storagebuilder = _interopRequireDefault(require(\"./storagebuilder\"));\nvar _scopedstorage = _interopRequireDefault(require(\"./scopedstorage\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/**\n * Get the storage builder for an app\n * @param appId App ID to scope storage\n */\nfunction getBuilder(appId) {\n  return new _storagebuilder.default(appId);\n}\n\n/**\n * Clear values from storage\n * @param storage The storage to clear\n * @param pred Callback to check if value should be cleared\n */\nfunction clearStorage(storage, pred) {\n  Object.keys(storage).filter(k => pred ? pred(k) : true).map(storage.removeItem.bind(storage));\n}\n\n/**\n * Clear all values from all storages\n */\nfunction clearAll() {\n  const storages = [window.sessionStorage, window.localStorage];\n  storages.map(s => clearStorage(s));\n}\n\n/**\n * Clear ony non persistent values\n */\nfunction clearNonPersistent() {\n  const storages = [window.sessionStorage, window.localStorage];\n  storages.map(s => clearStorage(s, k => !k.startsWith(_scopedstorage.default.GLOBAL_SCOPE_PERSISTENT)));\n}\n//# sourceMappingURL=index.js.map","import { defineComponent, useTemplateRef, ref, watch, computed, createBlock, openBlock, unref, withCtx, createElementBlock, createCommentVNode, createVNode, toDisplayString } from \"vue\";\nimport { setGuestNickname } from \"@nextcloud/auth\";\nimport { getBuilder } from \"@nextcloud/browser-storage\";\nimport NcDialog from \"@nextcloud/vue/components/NcDialog\";\nimport NcNoteCard from \"@nextcloud/vue/components/NcNoteCard\";\nimport NcTextField from \"@nextcloud/vue/components/NcTextField\";\nimport { t, l as logger, s as showError } from \"./index-_0iU0BYK.mjs\";\nimport { validateFilename, InvalidFilenameError, InvalidFilenameErrorReason } from \"@nextcloud/files\";\nimport { _ as _export_sfc } from \"./_plugin-vue_export-helper-1tPrXgE0.mjs\";\n/*!\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nfunction getGuestNameValidity(name) {\n  if (name.trim() === \"\") {\n    return t(\"Names must not be empty.\");\n  }\n  if (name.startsWith(\".\")) {\n    return t(\"Names must not start with a dot.\");\n  }\n  if (name.length > 64) {\n    return t(\"Names may be at most 64 characters long.\");\n  }\n  try {\n    validateFilename(name);\n    return \"\";\n  } catch (error) {\n    if (!(error instanceof InvalidFilenameError)) {\n      throw error;\n    }\n    switch (error.reason) {\n      case InvalidFilenameErrorReason.Character:\n        return t('\"{char}\" is not allowed inside a name.', { char: error.segment });\n      case InvalidFilenameErrorReason.ReservedName:\n        return t('\"{segment}\" is a reserved name and not allowed.', { segment: error.segment });\n      case InvalidFilenameErrorReason.Extension:\n        if (error.segment.match(/\\.[a-z]/i)) {\n          return t('\"{extension}\" is not an allowed name.', { extension: error.segment });\n        }\n        return t('Names must not end with \"{extension}\".', { extension: error.segment });\n      default:\n        return t(\"Invalid name.\");\n    }\n  }\n}\nconst _hoisted_1 = {\n  key: 0,\n  class: \"public-auth-prompt__text\"\n};\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"PublicAuthPrompt\",\n  props: {\n    nickname: { default: \"\" },\n    title: { default: t(\"Guest identification\") },\n    text: { default: \"\" },\n    notice: { default: \"\" },\n    submitLabel: { default: t(\"Submit name\") },\n    cancellable: { type: Boolean }\n  },\n  emits: [\"close\"],\n  setup(__props, { emit: __emit }) {\n    const props = __props;\n    const emit = __emit;\n    const inputElement = useTemplateRef(\"input\");\n    const storage = getBuilder(\"public\").build();\n    const name = ref(props.nickname);\n    watch(() => props.nickname, () => {\n      name.value = props.nickname;\n    });\n    watch(name, (newName) => {\n      const validity = getGuestNameValidity(newName);\n      if (!validity) {\n        inputElement.value.setCustomValidity(validity);\n        inputElement.value.reportValidity();\n        inputElement.value.focus();\n        return;\n      }\n    });\n    const buttons = computed(() => {\n      const cancelButton = {\n        label: t(\"Cancel\"),\n        variant: \"tertiary\",\n        callback: () => emit(\"close\")\n      };\n      const submitButton = {\n        label: props.submitLabel,\n        type: \"submit\",\n        variant: \"primary\"\n      };\n      if (props.cancellable) {\n        return [cancelButton, submitButton];\n      }\n      return [submitButton];\n    });\n    const defaultNotice = computed(() => {\n      if (props.notice) {\n        return props.notice;\n      }\n      if (name.value) {\n        return t(\"You are currently identified as {nickname}.\", { nickname: name.value });\n      }\n      return t(\"You are currently not identified.\");\n    });\n    function onSubmit() {\n      const nickname = name.value.trim();\n      const validity = getGuestNameValidity(nickname);\n      if (validity) {\n        inputElement.value.setCustomValidity(validity);\n        inputElement.value.reportValidity();\n        inputElement.value.focus();\n        return;\n      }\n      if (nickname === \"\") {\n        inputElement.value.setCustomValidity(t(\"You cannot leave the name empty.\"));\n        inputElement.value.reportValidity();\n        inputElement.value.focus();\n        return;\n      }\n      if (nickname.length < 2) {\n        inputElement.value.setCustomValidity(t(\"Please enter a name with at least 2 characters.\"));\n        inputElement.value.reportValidity();\n        inputElement.value.focus();\n        return;\n      }\n      try {\n        setGuestNickname(nickname);\n      } catch (error) {\n        logger.error(\"Failed to set nickname\", { error });\n        showError(t(\"Failed to set nickname.\"));\n        inputElement.value.focus();\n        return;\n      }\n      storage.setItem(\"public-auth-prompt-shown\", \"true\");\n      emit(\"close\", name.value);\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(NcDialog), {\n        buttons: buttons.value,\n        class: \"public-auth-prompt\",\n        \"data-cy-public-auth-prompt-dialog\": \"\",\n        \"is-form\": \"\",\n        \"no-close\": \"\",\n        name: __props.title,\n        onSubmit\n      }, {\n        default: withCtx(() => [\n          __props.text ? (openBlock(), createElementBlock(\"p\", _hoisted_1, toDisplayString(__props.text), 1)) : createCommentVNode(\"\", true),\n          createVNode(unref(NcNoteCard), {\n            class: \"public-auth-prompt__header\",\n            text: defaultNotice.value,\n            type: \"info\"\n          }, null, 8, [\"text\"]),\n          createVNode(unref(NcTextField), {\n            ref: \"input\",\n            modelValue: name.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => name.value = $event),\n            class: \"public-auth-prompt__input\",\n            \"data-cy-public-auth-prompt-dialog-name\": \"\",\n            label: unref(t)(\"Name\"),\n            placeholder: unref(t)(\"Enter your name\"),\n            required: !__props.cancellable,\n            minlength: \"2\",\n            maxlength: \"64\",\n            name: \"name\"\n          }, null, 8, [\"modelValue\", \"label\", \"placeholder\", \"required\"])\n        ]),\n        _: 1\n      }, 8, [\"buttons\", \"name\"]);\n    };\n  }\n});\nconst PublicAuthPrompt = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-b33d88e5\"]]);\nexport {\n  PublicAuthPrompt as default\n};\n//# sourceMappingURL=PublicAuthPrompt-DzkaNZKO.mjs.map\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nclass ScopedStorage {\n  constructor(scope, wrapped, persistent) {\n    _defineProperty(this, \"scope\", void 0);\n    _defineProperty(this, \"wrapped\", void 0);\n    this.scope = \"\".concat(persistent ? ScopedStorage.GLOBAL_SCOPE_PERSISTENT : ScopedStorage.GLOBAL_SCOPE_VOLATILE, \"_\").concat(btoa(scope), \"_\");\n    this.wrapped = wrapped;\n  }\n  scopeKey(key) {\n    return \"\".concat(this.scope).concat(key);\n  }\n  setItem(key, value) {\n    this.wrapped.setItem(this.scopeKey(key), value);\n  }\n  getItem(key) {\n    return this.wrapped.getItem(this.scopeKey(key));\n  }\n  removeItem(key) {\n    this.wrapped.removeItem(this.scopeKey(key));\n  }\n  clear() {\n    Object.keys(this.wrapped).filter(key => key.startsWith(this.scope)).map(this.wrapped.removeItem.bind(this.wrapped));\n  }\n}\nexports.default = ScopedStorage;\n_defineProperty(ScopedStorage, \"GLOBAL_SCOPE_VOLATILE\", 'nextcloud_vol');\n_defineProperty(ScopedStorage, \"GLOBAL_SCOPE_PERSISTENT\", 'nextcloud_per');\n//# sourceMappingURL=scopedstorage.js.map"],"names":["Object","defineProperty","exports","value","obj","_scopedstorage","__esModule","default","_defineProperty","key","i","t","r","e","Symbol","toPrimitive","call","TypeError","String","Number","_toPrimitive","enumerable","configurable","writable","constructor","appId","this","persist","arguments","length","undefined","persisted","clearOnLogout","clear","clearedOnLogout","build","window","localStorage","sessionStorage","_storagebuilder","_interopRequireDefault","clearStorage","storage","pred","keys","filter","k","map","removeItem","bind","getGuestNameValidity","name","trim","startsWith","error","reason","Character","char","segment","ReservedName","Extension","match","extension","_hoisted_1","class","_sfc_main","__name","props","nickname","title","text","notice","submitLabel","cancellable","type","Boolean","emits","setup","__props","emit","__emit","inputElement","newName","validity","setCustomValidity","reportValidity","focus","buttons","cancelButton","label","variant","callback","submitButton","defaultNotice","onSubmit","l","s","setItem","_ctx","_cache","ref","modelValue","$event","placeholder","required","minlength","maxlength","_","PublicAuthPrompt","ScopedStorage","scope","wrapped","persistent","concat","GLOBAL_SCOPE_PERSISTENT","GLOBAL_SCOPE_VOLATILE","btoa","scopeKey","getItem"],"sourceRoot":""}